<div class="auth-shell">
  <!-- LEFT: Form -->
  <div class="auth-left">
    <div class="auth-box">

      <div class="brand">
        <div class="brand-text">
          <h1 class="title">{{ 'auth.changepassword' | translate }}</h1>
          <p class="sub">Choose a strong new password to keep your account secure.</p>
        </div>
      </div>

      <!-- Success -->
      <div *ngIf="successMessage" class="alert alert-success text-center mb-3" role="alert" aria-live="polite">
        {{ successMessage }}
      </div>

      <!-- Error -->
      <div *ngIf="errorMessage" class="alert alert-danger text-center mb-3" role="alert" aria-live="assertive">
        {{ errorMessage }}
      </div>

      <form [formGroup]="loginForm" (ngSubmit)="onLogin()" class="form">

        <div class="field">
          <label class="label">{{ 'auth.oldPassword' | translate }}</label>
          <input type="password" class="input" formControlName="oldpassword" placeholder="********" />
          <div *ngIf="loginForm.get('oldpassword')?.touched && loginForm.get('oldpassword')?.invalid" class="error">
            Old Password is required
          </div>
        </div>

        <div class="field mb-0">
          <label class="label">{{ 'auth.newPassword' | translate }}</label>
          <input type="password" class="input" formControlName="newpassword" placeholder="********" />
          <div *ngIf="loginForm.get('newpassword')?.touched && loginForm.get('newpassword')?.invalid" class="error">
            New Password is required
          </div>
        </div>

        <button class="btn btn-bg-color w-100 py-1 fs-5 mt-3" type="submit"
                [disabled]="loginForm.invalid || loading">
          <ng-container *ngIf="!loading; else loadingTpl">
            {{ 'auth.changepassword' | translate }}
          </ng-container>
          <ng-template #loadingTpl>Changing...</ng-template>
        </button>

        <div class="divider"><span>or</span></div>

        <div class="bottom">
          <span>Back to</span>
          <a routerLink="/auth/login" class="link strong pb-0">{{ 'auth.login' | translate }}</a>
        </div>

      </form>
    </div>
  </div>

  <!-- RIGHT: Image -->
  <div class="auth-right" aria-hidden="true">
    <div class="img-layer"></div>
  </div>
</div>
