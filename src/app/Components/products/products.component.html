<div class="parent">

    <div *ngIf="products?.length > 0">

        <div class="row responsive-container justify-content-start m-auto" *ngIf="!full">
            <!-- <h1 class="mt-3">{{products[0].category.name}}</h1> -->
            <h2 class="mt-2 mb-4 main-color">{{ (languageService.languageChanged$ | async) === 'ar' ? products[0].category.name_ar
                : products[0].category.name }}</h2>

            <div class="col-6 col-sm-6 col-md-4 col-lg-3 col  px-2 pointer" *ngFor="let item of products"
                (click)="gotodetails(item)">
                <div class="product-card h-100 d-flex flex-column justify-content-between">
                    <div class="d-flex justify-content-between align-items-start">


                        <div class="icons second-color">
                            <i *ngIf="!item.isFavorite" class="fa-regular fa-heart fs-5 pointer"
                                (click)="addToFavourite(item); $event.stopPropagation()">
                            </i>

                            <i *ngIf="item.isFavorite" class="fa-solid fa-heart fs-5 pointer"
                                (click)="removeFromFavourite(item); $event.stopPropagation()">
                            </i>
                            <!-- <i *ngIf="item.stock > 0" class="fa-solid fa-cart-shopping fs-5 pointer"
                                (click)="addToCart(item); $event.stopPropagation()"></i> -->
                        </div>

                        <div class="discount-badge second-bg-color" *ngIf="item.discount > 0 && item.stock > 0">{{item.discount}}%
                        </div>

                        <p class="outOfStock px-1 mb-0 rounded" *ngIf="item.stock <= 0">{{'outOfStock' | translate}}</p>


                    </div>

                    <div class="image-wrapper">
                        <img [src]="item.imagePath" class="product-image" />
                        <!-- <img src="../../../assets/mango matcha.png" class="product-image" /> -->
                    </div>

                    <!-- <h6 class="product-name">{{item.name}}</h6> -->
                    <p class="product-name pb-0 main-color">{{ (languageService.languageChanged$ | async) === 'ar' ?
                        item.name_ar
                        : item.name }}</p>
                    <div class="price second-color"> <span> {{ item.newPrice}} <span>{{ (languageService.languageChanged$ |
                                async) === 'ar' ?
                                item.currency_ar : item.currency }}</span> </span></div>
                </div>
            </div>
        </div>





        <div class="row responsive-container justify-content-start m-auto" *ngIf="full">
            <ng-container *ngFor="let item of products">

                <!-- <h1 class="mt-3">{{item.categoryName}}</h1> -->
                <h2 class="mt-3 mb-4 main-color">{{ (languageService.languageChanged$ | async) === 'ar' ? item.categoryName_ar :
                    item.categoryName }}</h2>

                <div class="col-6 col-sm-6 col-md-4 col-lg-3 col px-2 pointer " *ngFor="let product of item.products"
                    (click)="gotodetails(product)">
                    <div class="product-card h-100 d-flex flex-column justify-content-between">
                        <div class="d-flex justify-content-between align-items-start">




                            <div class="icons second-color">

                                <i *ngIf="!product.isFavorite" class="fa-regular fa-heart fs-5 pointer mb-0 pb-0"
                                    (click)="addToFavourite(product); $event.stopPropagation()">
                                </i>

                                <i *ngIf="product.isFavorite" class="fa-solid fa-heart fs-5 pointer mb-0 pb-0"
                                    (click)="removeFromFavourite(product); $event.stopPropagation()">
                                </i>

                                <!-- <i *ngIf="product.stock > 0" class="fa-solid fa-cart-shopping fs-5 pointer mb-0 pb-0"
                                    (click)="addToCart(product); $event.stopPropagation()"></i> -->
                            </div>

                            <div class="discount-badge second-bg-color" *ngIf="product.discount > 0 && product.stock > 0">
                                {{product.discount}}%</div>

                                
                            <p class="outOfStock px-1 mb-0 rounded " *ngIf="product.stock <= 0">{{'outOfStock' |
                                translate}}</p>

                        </div>

                        <div class="image-wrapper">
                            <img [src]="product.imagePath" class="product-image" />
                        </div>

                        <!-- <h6 class="product-name">{{product.name}}</h6> -->
                        <p class="product-name main-color">{{ (languageService.languageChanged$ | async) === 'ar' ?
                            product.name_ar : product.name }}</p>
                        <div class="price second-color"> <span>
                                {{ product.newPrice}} <span>{{ (languageService.languageChanged$ | async) === 'ar' ?
                                    product.currency_ar : product.currency }}</span></span>
                        </div>
                    </div>
                </div>
            </ng-container>
        </div>

    </div>




    <h1 class="text-center my-5 py-5" *ngIf="products?.length == 0">{{"Products.NoProductsFound" | translate}}
    </h1>
    <button class="scroll-to-top" *ngIf="showScrollButton" (click)="scrollToTop()">
        <i class="fa-solid fa-arrow-up"></i>
    </button>
</div>